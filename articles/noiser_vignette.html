<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Adding noise â€¢ denoiser</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Adding noise">
<script type="text/javascript" async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">denoiser</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-usage" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Usage</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-usage">
<li><a class="dropdown-item" href="../articles/getting_started.html">Getting started</a></li>
    <li><a class="dropdown-item" href="../articles/noiser_vignette.html">Adding noise</a></li>
    <li><a class="dropdown-item" href="../articles/denoiser_vignette.html">Filtering data</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="nav-link" href="https://github.com/ndpvh/denoiser/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Adding noise</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ndpvh/denoiser/blob/version/vignettes/noiser_vignette.Rmd"><code>vignettes/noiser_vignette.Rmd</code></a></small>
      <div class="d-none name"><code>noiser_vignette.Rmd</code></div>
    </div>

    
    
<p>The first important functionality of the package is to add noise to
positional data. This is a useful feature when setting up recovery
studies, especially if one wants to preserve some type of â€œrealismâ€ in
these studies. The primary function to â€œnoise upâ€ the data is
<code>noiser</code>, the functionality of which will be explained in
this section.</p>
<div class="section level2">
<h2 id="measurement-model">Measurement model<a class="anchor" aria-label="anchor" href="#measurement-model"></a>
</h2>
<p>When you add noise to (simulated) positional data, you implicitly
assume that there is a difference between the <em>measurement</em> of a
position and the <em>actual (latent)</em> position. Within the package,
the function that connects the measurement to the latent position is
called the <em>measurement model</em>, which can be written down as:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ğ²</mi><mo>=</mo><mi>ğŸ</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>ğ±</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\begin{equation}
  \mathbf{y} = \mathbf{f}(\mathbf{x})
\end{equation}</annotation></semantics></math> where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ğ²</mi><annotation encoding="application/x-tex">\mathbf{y}</annotation></semantics></math>
represents the measurement of the latent position
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ğ±</mi><annotation encoding="application/x-tex">\mathbf{x}</annotation></semantics></math>.
In other words, the measurement depends on but is not equal to the
latent position. How exactly these two relate depends on the link
function
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ğŸ</mi><annotation encoding="application/x-tex">\mathbf{f}</annotation></semantics></math>,
two of which are implemented in the package.</p>
<div class="section level3">
<h3 id="independent-error">Independent error<a class="anchor" aria-label="anchor" href="#independent-error"></a>
</h3>
<p>With independent error, we mean that the error added to the latent
position is (a) independent of the process itself (i.e., independent of
the value of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ğ±</mi><annotation encoding="application/x-tex">\bm{x}</annotation></semantics></math>)
and (b) independent of time. One example of a measurement model in which
this is the case is the following.</p>
<p>Denote
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>ğ²</mi><mi>i</mi></msub><annotation encoding="application/x-tex">\bm{y}_i</annotation></semantics></math>
as the measurement taken at time
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>t</mi><mi>i</mi></msub><annotation encoding="application/x-tex">t_i</annotation></semantics></math>,
and furthermore denote
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>ğ±</mi><mi>i</mi></msub><annotation encoding="application/x-tex">\bm{x}_i</annotation></semantics></math>
as the latent position at that same time, then condition (a) is met if
we define the relationship between
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>ğ²</mi><mi>i</mi></msub><annotation encoding="application/x-tex">\bm{y}_i</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>ğ±</mi><mi>i</mi></msub><annotation encoding="application/x-tex">\bm{x}_i</annotation></semantics></math>
as:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>ğ²</mi><mi>i</mi></msub><mo>=</mo><msub><mi>ğ±</mi><mi>i</mi></msub><mo>+</mo><msub><mi>ğ›œ</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\begin{equation}
  \bm{y}_i = \bm{x}_i + \bm{\epsilon}_i
\end{equation}</annotation></semantics></math> where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ğ›œ</mi><annotation encoding="application/x-tex">\bm{\epsilon}</annotation></semantics></math>
represents the associated measurement error. Importantly for condition
(a),
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ğ›œ</mi><annotation encoding="application/x-tex">\bm{\epsilon}</annotation></semantics></math>
is independent of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ğ±</mi><annotation encoding="application/x-tex">\bm{x}</annotation></semantics></math>,
meaning that the observation or measurement
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ğ²</mi><annotation encoding="application/x-tex">\bm{y}</annotation></semantics></math>
can be obtained through a simple adding of the error to the process,
without any interactions between both components. This assumption
conforms to the classical measurement theory perspective (Lord et al.,
1968) and will be assumed throughout.</p>
<p>Whatâ€™s left is to defined
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ğ›œ</mi><annotation encoding="application/x-tex">\bm{\epsilon}</annotation></semantics></math>.
Conforming to condition (b), we assume that
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ğ›œ</mi><annotation encoding="application/x-tex">\bm{\epsilon}</annotation></semantics></math>
is drawn from a multivariate normal distribution so that:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ğ›œ</mi><mover><mo>âˆ¼</mo><mrow><mi>i</mi><mi>i</mi><mi>d</mi></mrow></mover><mi>N</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>ğ›</mi><mo>,</mo><mi>Î£</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\begin{equation}
  \bm{\epsilon} \overset{iid}{\sim} N(\bm{\mu}, \Sigma)
\end{equation}</annotation></semantics></math> where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ğ›</mi><annotation encoding="application/x-tex">\bm{\mu}</annotation></semantics></math>
represents the mean of the error (e.g., in case there is bias) and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Î£</mi><annotation encoding="application/x-tex">\Sigma</annotation></semantics></math>
is the covariance matrix of the error.</p>
</div>
<div class="section level3">
<h3 id="temporal-error">Temporal error<a class="anchor" aria-label="anchor" href="#temporal-error"></a>
</h3>
<p>With temporal error, we mean that the error added to the latent
position is (a) independent of the process itself and (b) depends on
time. This means that we still conform to the previously defined
relationship between
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ğ²</mi><annotation encoding="application/x-tex">\bm{y}</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ğ±</mi><annotation encoding="application/x-tex">\bm{x}</annotation></semantics></math>,
so that:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>ğ²</mi><mi>i</mi></msub><mo>=</mo><msub><mi>ğ±</mi><mi>i</mi></msub><mo>+</mo><msub><mi>ğ›œ</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\begin{equation}
  \bm{y}_i = \bm{x}_i + \bm{\epsilon}_i
\end{equation}</annotation></semantics></math> However, our model of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ğ›œ</mi><annotation encoding="application/x-tex">\bm{\epsilon}</annotation></semantics></math>
changes. Within the package, we assume that the error changes over time
as a vector autoregressive process, so that:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>ğ›œ</mi><mi>i</mi></msub><mo>=</mo><mi>ğ›…</mi><mo>+</mo><mi>Î˜</mi><msub><mi>ğ›œ</mi><mrow><mi>i</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>ğ›š</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\begin{equation}
  \bm{\epsilon}_i = \bm{\delta} + \Theta \bm{\epsilon}_{i - 1} + \bm{\omega}_i
\end{equation}</annotation></semantics></math> where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>ğ›œ</mi><mi>i</mi></msub><annotation encoding="application/x-tex">\bm{\epsilon}_i</annotation></semantics></math>
represents the measurement error at time
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>t</mi><mi>i</mi></msub><annotation encoding="application/x-tex">t_i</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ğ›…</mi><annotation encoding="application/x-tex">\bm{\delta}</annotation></semantics></math>
is the intercept of the (measurement) process,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Î˜</mi><annotation encoding="application/x-tex">\Theta</annotation></semantics></math>
is the transition matrix, defining the linear temporal structure of the
error, and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>ğ›š</mi><mi>i</mi></msub><annotation encoding="application/x-tex">\bm{\omega}_i</annotation></semantics></math>
is the innovation of the measurement process at time
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>t</mi><mi>i</mi></msub><annotation encoding="application/x-tex">t_i</annotation></semantics></math>
(Hamilton, 1994). The innovations themselves are distribution according
to a multivariate normal distribution, so that:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ğ›š</mi><mover><mo>âˆ¼</mo><mrow><mi>i</mi><mi>i</mi><mi>d</mi></mrow></mover><mi>N</mi><mrow><mo stretchy="true" form="prefix">(</mo><mn>ğŸ</mn><mo>,</mo><mi>Î£</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\begin{equation}
  \bm{\omega} \overset{iid}{\sim} N(\bm{0}, \Sigma)
\end{equation}</annotation></semantics></math> where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Î£</mi><annotation encoding="application/x-tex">\Sigma</annotation></semantics></math>
is the covariance matrix of the innovations.</p>
<p>If you were to specify the parameters of this model, it is useful to
keep the take the first moments of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ğ›œ</mi><annotation encoding="application/x-tex">\bm{\epsilon}</annotation></semantics></math>
according to the vector autoregressive model into account, especially if
one wishes to relate these to the independent error model. According to
the vector autoregressive model, the mean
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ğ›</mi><annotation encoding="application/x-tex">\bm{\mu}</annotation></semantics></math>
and covariance
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>Î£</mi><mi>Ïµ</mi></msub><annotation encoding="application/x-tex">\Sigma_\epsilon</annotation></semantics></math>
of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ğ›œ</mi><annotation encoding="application/x-tex">\bm{\epsilon}</annotation></semantics></math>
are equal to:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ğ›</mi><mo>=</mo><msup><mrow><mo stretchy="true" form="prefix">(</mo><mi>I</mi><mo>âˆ’</mo><mi>Î˜</mi><mo stretchy="true" form="postfix">)</mo></mrow><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup><mi>ğ›…</mi></mrow><annotation encoding="application/x-tex">\begin{equation}
  \bm{\mu} = (I - \Theta)^{-1} \bm{\delta}
\end{equation}</annotation></semantics></math></p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î£</mi><mi>Ïµ</mi></msub><mo>=</mo><mi>Î£</mi><mo>âˆ’</mo><mi>Î˜</mi><mi>Î£</mi><msup><mi>Î˜</mi><mi>T</mi></msup></mrow><annotation encoding="application/x-tex">\begin{equation}
  \Sigma_\epsilon = \Sigma - \Theta \Sigma \Theta^T 
\end{equation}</annotation></semantics></math> where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>I</mi><annotation encoding="application/x-tex">I</annotation></semantics></math>
is the identity matrix.</p>
</div>
</div>
<div class="section level2">
<h2 id="using-noiser">Using <code>noiser</code><a class="anchor" aria-label="anchor" href="#using-noiser"></a>
</h2>
<p>With the mathematics out of the way, we can now focus on how to use
the <code>noiser</code> function itself to achieve the wanted results.
First, we generate a dataset called <code>data</code> displaying
circular motion.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define the simulated angles of the observations</span></span>
<span><span class="va">angles</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2</span> <span class="op">*</span> <span class="va">pi</span>, length.out <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Define the dataset itself</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  time <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">50</span>, </span>
<span>  x <span class="op">=</span> <span class="fl">10</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">cos</a></span><span class="op">(</span><span class="va">angles</span><span class="op">)</span>,</span>
<span>  y <span class="op">=</span> <span class="fl">10</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">sin</a></span><span class="op">(</span><span class="va">angles</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot these data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">x</span>, <span class="va">data</span><span class="op">$</span><span class="va">y</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="noiser_vignette_files/figure-html/unnamed-chunk-2-1.png" class="r-plt" alt="One sees 50 dots placed on the circumference of a circle, each of which represents a latent position on a plane.
" width="75%"><p class="caption">
<em>Latent positions on a plane representing circular motion.</em>
</p>
</div>
<p>Once these data have been created, we can add noise to them through
the <code>noiser</code> function. Using the independent measurement
model with mean
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ğ›</mi><mo>=</mo><mrow><mo stretchy="true" form="prefix">[</mo><mtable><mtr><mtd columnalign="center" style="text-align: center"><mn>1</mn></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mn>1</mn></mtd></mtr></mtable><mo stretchy="true" form="postfix">]</mo></mrow></mrow><annotation encoding="application/x-tex">\bm{\mu} = \begin{bmatrix} 1 \\ 1 \end{bmatrix}</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î£</mi><mo>=</mo><mrow><mo stretchy="true" form="prefix">[</mo><mtable><mtr><mtd columnalign="center" style="text-align: center"><mn>1</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>0.25</mn></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mn>0.25</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>1</mn></mtd></mtr></mtable><mo stretchy="true" form="postfix">]</mo></mrow></mrow><annotation encoding="application/x-tex">\Sigma = \begin{bmatrix} 1 &amp; 0.25 \\ 0.25 &amp; 1 \end{bmatrix}</annotation></semantics></math>
for this purpose can be achieved through calling the following code:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add noise to the data</span></span>
<span><span class="va">noised_up</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/noiser.html">noiser</a></span><span class="op">(</span></span>
<span>  <span class="va">data</span>, </span>
<span>  model <span class="op">=</span> <span class="st">"independent"</span>,</span>
<span>  mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span>  covariance <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0.25</span>, <span class="fl">0.25</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span>nrow <span class="op">=</span> <span class="fl">2</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot the noised up data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">noised_up</span><span class="op">$</span><span class="va">x</span>, <span class="va">noised_up</span><span class="op">$</span><span class="va">y</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="noiser_vignette_files/figure-html/unnamed-chunk-3-1.png" class="r-plt" alt="One sees 50 dots placed on the circumference of a circle, albeit with some added noise around the latent positions that were plotted before.
" width="75%"><p class="caption">
<em>Measured positions on a plane representing circular motion. Error
was added according to the independent measurement model.</em>
</p>
</div>
<p>Notice that due to the specification of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ğ›</mi><annotation encoding="application/x-tex">\bm{\mu}</annotation></semantics></math>,
the noisy data have been moved to fall around this new mean.</p>
<p>Using the temporal model can be achieved in a similar way. Specifying
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ğ›…</mi><mo>=</mo><mrow><mo stretchy="true" form="prefix">[</mo><mtable><mtr><mtd columnalign="center" style="text-align: center"><mn>2.5</mn></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mn>2.5</mn></mtd></mtr></mtable><mo stretchy="true" form="postfix">]</mo></mrow></mrow><annotation encoding="application/x-tex">\bm{\delta} = \begin{bmatrix} 2.5 \\ 2.5 \end{bmatrix}</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î˜</mi><mo>=</mo><mrow><mo stretchy="true" form="prefix">[</mo><mtable><mtr><mtd columnalign="center" style="text-align: center"><mn>0.5</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>0</mn></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mn>0</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>0.5</mn></mtd></mtr></mtable><mo stretchy="true" form="postfix">]</mo></mrow></mrow><annotation encoding="application/x-tex">\Theta = \begin{bmatrix} 0.5 &amp; 0 \\ 0 &amp; 0.5 \end{bmatrix}</annotation></semantics></math>,
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î£</mi><mo>=</mo><mrow><mo stretchy="true" form="prefix">[</mo><mtable><mtr><mtd columnalign="center" style="text-align: center"><mn>1.33</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>0.33</mn></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mn>0.33</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>1.33</mn></mtd></mtr></mtable><mo stretchy="true" form="postfix">]</mo></mrow></mrow><annotation encoding="application/x-tex">\Sigma = \begin{bmatrix} 1.33 &amp; 0.33 \\ 0.33 &amp; 1.33 \end{bmatrix}</annotation></semantics></math>,
so that
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ğ›</mi><mo>=</mo><mrow><mo stretchy="true" form="prefix">[</mo><mtable><mtr><mtd columnalign="center" style="text-align: center"><mn>1</mn></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mn>1</mn></mtd></mtr></mtable><mo stretchy="true" form="postfix">]</mo></mrow></mrow><annotation encoding="application/x-tex">\bm{\mu} = \begin{bmatrix} 1 \\ 1 \end{bmatrix}</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î£</mi><mi>Ïµ</mi></msub><mo>=</mo><mrow><mo stretchy="true" form="prefix">[</mo><mtable><mtr><mtd columnalign="center" style="text-align: center"><mn>1</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>0.25</mn></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mn>0.25</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>1</mn></mtd></mtr></mtable><mo stretchy="true" form="postfix">]</mo></mrow></mrow><annotation encoding="application/x-tex">\Sigma_\epsilon = \begin{bmatrix} 1 &amp; 0.25 \\ 0.25 &amp; 1 \end{bmatrix}</annotation></semantics></math>,
we write:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add noise to the data</span></span>
<span><span class="va">noised_up</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/noiser.html">noiser</a></span><span class="op">(</span></span>
<span>  <span class="va">data</span>, </span>
<span>  model <span class="op">=</span> <span class="st">"temporal"</span>,</span>
<span>  intercept <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2.5</span>, <span class="fl">2.5</span><span class="op">)</span>,</span>
<span>  transition <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/diag.html" class="external-link">diag</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">*</span> <span class="fl">0.5</span>,</span>
<span>  covariance <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span><span class="op">/</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">/</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">/</span><span class="fl">3</span>, <span class="fl">4</span><span class="op">/</span><span class="fl">3</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span>nrow <span class="op">=</span> <span class="fl">2</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot the noised up data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">noised_up</span><span class="op">$</span><span class="va">x</span>, <span class="va">noised_up</span><span class="op">$</span><span class="va">y</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="noiser_vignette_files/figure-html/unnamed-chunk-4-1.png" class="r-plt" alt="One sees 50 dots placed on the circumference of a circle, albeit with some added noise around the latent positions that were plotted before.
" width="75%"><p class="caption">
<em>Measured positions on a plane representing circular motion. Error
was added according to the temporal measurement model.</em>
</p>
</div>
<div class="section level3">
<h3 id="things-to-look-out-for">Things to look out for<a class="anchor" aria-label="anchor" href="#things-to-look-out-for"></a>
</h3>
<p>When specifying the parameters of the measurement models, there are
several things that you should look out for. First, one should closely
consider the dimensionality of the parameters when specifying them.
Specifically, the <code>denoiser</code> package works on the assumption
that things have been measured/simulated on two-dimensional plane,
meaning that all data should consist of an x- and y-coordinate. The
parameters provided to the native <code>independent</code> and
<code>temporal</code> models should cohere to this specification. This
means that, for the independent model, the <code>mean</code> should
consist of exactly 2 values and the <code>covariance</code> should
consist of a
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>Ã—</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">2 \times 2</annotation></semantics></math>
matrix. While <code>noiser</code> can handle deviations in this
specification for the <code>mean</code>, it cannot do so for the
<code>covariance</code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Specify only one mean: In this case, the value is used for both dimensions</span></span>
<span><span class="va">noised_up</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/noiser.html">noiser</a></span><span class="op">(</span></span>
<span>  <span class="va">data</span>, </span>
<span>  model <span class="op">=</span> <span class="st">"independent"</span>,</span>
<span>  mean <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  covariance <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/diag.html" class="external-link">diag</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">noised_up</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   time        x         y</span></span>
<span><span class="co">## 1    1 15.83021  4.570620</span></span>
<span><span class="co">## 2    2 15.42149  7.639233</span></span>
<span><span class="co">## 3    3 15.86659  7.465688</span></span>
<span><span class="co">## 4    4 15.02089  8.480516</span></span>
<span><span class="co">## 5    5 12.25735  7.460495</span></span>
<span><span class="co">## 6    6 13.84274 11.046592</span></span></code></pre>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Specify three means: In this case, only the first two values are used</span></span>
<span><span class="va">noised_up</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/noiser.html">noiser</a></span><span class="op">(</span></span>
<span>  <span class="va">data</span>, </span>
<span>  model <span class="op">=</span> <span class="st">"independent"</span>,</span>
<span>  mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">15</span><span class="op">)</span>,</span>
<span>  covariance <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/diag.html" class="external-link">diag</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">noised_up</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   time        x         y</span></span>
<span><span class="co">## 1    1 15.57895  9.643876</span></span>
<span><span class="co">## 2    2 15.06333 10.214307</span></span>
<span><span class="co">## 3    3 14.14649 13.613662</span></span>
<span><span class="co">## 4    4 12.53559 14.934246</span></span>
<span><span class="co">## 5    5 12.26453 15.105568</span></span>
<span><span class="co">## 6    6 11.49594 15.580700</span></span></code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Specify a 1D matrix for the covariances: Leads to an error</span></span>
<span><span class="va">noised_up</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/noiser.html">noiser</a></span><span class="op">(</span></span>
<span>  <span class="va">data</span>, </span>
<span>  model <span class="op">=</span> <span class="st">"independent"</span>,</span>
<span>  mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span>  covariance <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/diag.html" class="external-link">diag</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #BBBB00; font-weight: bold;">Error</span><span style="font-weight: bold;"> in `measurement_models[[model]]()`:</span></span></span>
<span><span class="co">## <span style="color: #BBBB00;">!</span> Provided covariance matrix does not have the right dimensionality. A 1 x 1 matrix is provided instead of the required 2 x 2 matrix.</span></span></code></pre>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Specify a 3D matrix for the covariances: Leads to an error</span></span>
<span><span class="va">noised_up</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/noiser.html">noiser</a></span><span class="op">(</span></span>
<span>  <span class="va">data</span>, </span>
<span>  model <span class="op">=</span> <span class="st">"independent"</span>,</span>
<span>  mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span>  covariance <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/diag.html" class="external-link">diag</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #BBBB00; font-weight: bold;">Error</span><span style="font-weight: bold;"> in `measurement_models[[model]]()`:</span></span></span>
<span><span class="co">## <span style="color: #BBBB00;">!</span> Provided covariance matrix does not have the right dimensionality. A 3 x 3 matrix is provided instead of the required 2 x 2 matrix.</span></span></code></pre>
<p>Similar restrictions for the parameters hold for
<code>intercept</code>, <code>transition</code>, and
<code>covariance</code> for the temporal model, where
<code>transition</code> and <code>covariance</code> should both be
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>Ã—</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">2 \times 2</annotation></semantics></math>
matrices. Like for the independent measurement model,
<code>noiser</code> is robust against misspecification of the dimension
for the <code>intercept</code>, but not for <code>transition</code> and
<code>covariance</code>.</p>
<p>Second, when specifying the covariance matrix, one should ensure that
it is positive definite. This means that (a) its eigenvalues should be
positive, (b) it should be a symmetric matrix, and (c) it is not
reducable in dimensionality (i.e., its leading minors should be
positive). Examples on non-positive-definite matrices are the
following:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Negative eigenvalues</span></span>
<span><span class="va">noised_up</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/noiser.html">noiser</a></span><span class="op">(</span></span>
<span>  <span class="va">data</span>, </span>
<span>  model <span class="op">=</span> <span class="st">"independent"</span>,</span>
<span>  mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>  covariance <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/diag.html" class="external-link">diag</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #BBBB00; font-weight: bold;">Error</span><span style="font-weight: bold;"> in `MASS::mvrnorm()`:</span></span></span>
<span><span class="co">## <span style="color: #BBBB00;">!</span> 'Sigma' is not positive definite</span></span></code></pre>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Negative eigenvalues</span></span>
<span><span class="va">noised_up</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/noiser.html">noiser</a></span><span class="op">(</span></span>
<span>  <span class="va">data</span>, </span>
<span>  model <span class="op">=</span> <span class="st">"independent"</span>,</span>
<span>  mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>  covariance <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span>nrow <span class="op">=</span> <span class="fl">2</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #BBBB00; font-weight: bold;">Error</span><span style="font-weight: bold;"> in `MASS::mvrnorm()`:</span></span></span>
<span><span class="co">## <span style="color: #BBBB00;">!</span> 'Sigma' is not positive definite</span></span></code></pre>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Reducable in dimension: Note that no error is thrown!</span></span>
<span><span class="va">noised_up</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/noiser.html">noiser</a></span><span class="op">(</span></span>
<span>  <span class="va">data</span>, </span>
<span>  model <span class="op">=</span> <span class="st">"independent"</span>,</span>
<span>  mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>  covariance <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span>nrow <span class="op">=</span> <span class="fl">2</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>An easy way to ensure the covariance matrix is positive definite is
by specifying itâ€™s Cholesky decomposition instead. Specifically, any
positive definite matrix can be decomposed so that:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î£</mi><mo>=</mo><mi>Î“</mi><msup><mi>Î“</mi><mi>T</mi></msup></mrow><annotation encoding="application/x-tex">\begin{equation}
  \Sigma = \Gamma \Gamma^T
\end{equation}</annotation></semantics></math> where for
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">dim</mtext><mrow><mo stretchy="true" form="prefix">(</mo><mi>Î£</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mn>2</mn><mo>Ã—</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">\text{dim}(\Sigma) = 2 \times 2</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Î“</mi><annotation encoding="application/x-tex">\Gamma</annotation></semantics></math>
is:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î“</mi><mo>=</mo><mrow><mo stretchy="true" form="prefix">[</mo><mtable><mtr><mtd columnalign="center" style="text-align: center"><msub><mi>Î³</mi><mn>1</mn></msub></mtd><mtd columnalign="center" style="text-align: center"><mn>0</mn></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><msub><mi>Î³</mi><mn>12</mn></msub></mtd><mtd columnalign="center" style="text-align: center"><msub><mi>Î³</mi><mn>2</mn></msub></mtd></mtr></mtable><mo stretchy="true" form="postfix">]</mo></mrow></mrow><annotation encoding="application/x-tex">\begin{equation}
  \Gamma = \begin{bmatrix}
    \gamma_1 &amp; 0 \\
    \gamma_{12} &amp; \gamma_{2}
  \end{bmatrix}
\end{equation}</annotation></semantics></math></p>
<p>By specifying the matrix
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Î“</mi><annotation encoding="application/x-tex">\Gamma</annotation></semantics></math>
instead of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Î£</mi><annotation encoding="application/x-tex">\Sigma</annotation></semantics></math>,
one therefore ensures that <code>noiser</code> can run. Note, however,
that this doesnâ€™t ensure that the results make sense: This is up for the
user to decide.</p>
<p>An example of how one can use the Cholesky decomposition instead of
specifying
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Î£</mi><annotation encoding="application/x-tex">\Sigma</annotation></semantics></math>
directly:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define the lower-triangular Cholesky matrix based on random numbers. Maximal standard deviation/covariance of 1</span></span>
<span><span class="va">gamma</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">3</span>, min <span class="op">=</span> <span class="fl">1e-2</span>, max <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">G</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">gamma</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="va">gamma</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>, <span class="fl">0</span>, <span class="va">gamma</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span>nrow <span class="op">=</span> <span class="fl">2</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create the covariance matrix</span></span>
<span><span class="va">S</span> <span class="op">&lt;-</span> <span class="va">G</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span><span class="op">(</span><span class="va">G</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use noiser to add noise to the data</span></span>
<span><span class="va">noised_up</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/noiser.html">noiser</a></span><span class="op">(</span></span>
<span>  <span class="va">data</span>, </span>
<span>  model <span class="op">=</span> <span class="st">"independent"</span>,</span>
<span>  mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>  covariance <span class="op">=</span> <span class="va">S</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot the noised up data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">noised_up</span><span class="op">$</span><span class="va">x</span>, <span class="va">noised_up</span><span class="op">$</span><span class="va">y</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="noiser_vignette_files/figure-html/unnamed-chunk-7-1.png" class="r-plt" alt="One sees 50 dots placed on the circumference of a circle, albeit with some added noise around the latent positions that were plotted before.
" width="75%"><p class="caption">
<em>Measured positions on a plane representing circular motion. Error
was added according to the independent measurement model with a randomly
generated covariance matrix through its Cholesky decomposition.</em>
</p>
</div>
</div>
<div class="section level3">
<h3 id="nonstandard-column-names">Nonstandard column names<a class="anchor" aria-label="anchor" href="#nonstandard-column-names"></a>
</h3>
<p>Up to now, our data has consisted of three columns, namely
<code>time</code>, <code>x</code>, and <code>y</code>. This is the data
structure that is expected by the functions in the <code>denoiser</code>
package. If your data does not conform to this structure and you wish to
use the <code>noiser</code> function, the function will automatically
throw an error:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create data with nonstandard column names</span></span>
<span><span class="va">angles</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2</span> <span class="op">*</span> <span class="va">pi</span>, length.out <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  seconds <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">50</span>, </span>
<span>  X <span class="op">=</span> <span class="fl">10</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">cos</a></span><span class="op">(</span><span class="va">angles</span><span class="op">)</span>,</span>
<span>  Y <span class="op">=</span> <span class="fl">10</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">sin</a></span><span class="op">(</span><span class="va">angles</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add noise to these data with the defaults on</span></span>
<span><span class="va">noised_up</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/noiser.html">noiser</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #BBBB00; font-weight: bold;">Error</span><span style="font-weight: bold;"> in `[.data.frame`:</span></span></span>
<span><span class="co">## <span style="color: #BBBB00;">!</span> undefined columns selected</span></span></code></pre>
<p>There are two ways around this issue. First, one can change the
column names in their dataset manually so that they conform to the
requirements of the functions in the package. While this is an easy way
around it, it also seems lazy on the end of the developer to not include
robustness against such a clear issue. We would agree with this
conclusion. The second way around this issue is therefore to specify the
<code>cols</code> argument in <code>noiser</code>. This argument
provides a mapping of the column names that are used internally in the
<code>denoiser</code> package to the column names that were originally
present in the data through a named vector. Specifically, one can
call:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define the mapping of the columns</span></span>
<span><span class="va">mapping</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"time"</span> <span class="op">=</span> <span class="st">"seconds"</span>,</span>
<span>  <span class="st">"x"</span> <span class="op">=</span> <span class="st">"X"</span>,</span>
<span>  <span class="st">"y"</span> <span class="op">=</span> <span class="st">"Y"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add noise to the data through using the mapping</span></span>
<span><span class="va">noised_up</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/noiser.html">noiser</a></span><span class="op">(</span></span>
<span>  <span class="va">data</span>, </span>
<span>  cols <span class="op">=</span> <span class="va">mapping</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">noised_up</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   seconds         X            Y</span></span>
<span><span class="co">## 1       1 10.008332 -0.001464746</span></span>
<span><span class="co">## 2       2  9.934924  1.231661005</span></span>
<span><span class="co">## 3       3  9.680141  2.485432030</span></span>
<span><span class="co">## 4       4  9.272046  3.718075756</span></span>
<span><span class="co">## 5       5  8.686468  4.858085884</span></span>
<span><span class="co">## 6       6  7.976029  5.940597542</span></span></code></pre>
<p>Note that when the data contains additional columns, that one should
specify this in the <code>cols</code> argument.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create data with nonstandard column names and additional variables</span></span>
<span><span class="va">angles</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2</span> <span class="op">*</span> <span class="va">pi</span>, length.out <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  seconds <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">50</span>, </span>
<span>  X <span class="op">=</span> <span class="fl">10</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">cos</a></span><span class="op">(</span><span class="va">angles</span><span class="op">)</span>,</span>
<span>  Y <span class="op">=</span> <span class="fl">10</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">sin</a></span><span class="op">(</span><span class="va">angles</span><span class="op">)</span>,</span>
<span>  variable_1 <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">50</span>,</span>
<span>  variable_2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"test"</span>, <span class="fl">50</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Define the mapping of the columns</span></span>
<span><span class="va">mapping</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"time"</span> <span class="op">=</span> <span class="st">"seconds"</span>,</span>
<span>  <span class="st">"x"</span> <span class="op">=</span> <span class="st">"X"</span>,</span>
<span>  <span class="st">"y"</span> <span class="op">=</span> <span class="st">"Y"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add noise to these data with the columns being provided</span></span>
<span><span class="va">noised_up</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/noiser.html">noiser</a></span><span class="op">(</span></span>
<span>  <span class="va">data</span>, </span>
<span>  cols <span class="op">=</span> <span class="va">mapping</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">noised_up</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   seconds        X           Y</span></span>
<span><span class="co">## 1       1 9.989030 0.003668147</span></span>
<span><span class="co">## 2       2 9.920981 1.320289871</span></span>
<span><span class="co">## 3       3 9.689500 2.561860470</span></span>
<span><span class="co">## 4       4 9.290149 3.784864101</span></span>
<span><span class="co">## 5       5 8.725190 4.918384702</span></span>
<span><span class="co">## 6       6 8.027195 5.978526066</span></span></code></pre>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Mention the additional columns explicitly in the mapping</span></span>
<span><span class="va">mapping</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"time"</span> <span class="op">=</span> <span class="st">"seconds"</span>,</span>
<span>  <span class="st">"x"</span> <span class="op">=</span> <span class="st">"X"</span>,</span>
<span>  <span class="st">"y"</span> <span class="op">=</span> <span class="st">"Y"</span>,</span>
<span>  <span class="st">"v1"</span> <span class="op">=</span> <span class="st">"variable_1"</span>,</span>
<span>  <span class="st">"v2"</span> <span class="op">=</span> <span class="st">"variable_2"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add noise to these data with the columns being provided</span></span>
<span><span class="va">noised_up</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/noiser.html">noiser</a></span><span class="op">(</span></span>
<span>  <span class="va">data</span>, </span>
<span>  cols <span class="op">=</span> <span class="va">mapping</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">noised_up</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   seconds         X          Y variable_1 variable_2</span></span>
<span><span class="co">## 1       1 10.014854 0.01106708          1       test</span></span>
<span><span class="co">## 2       2  9.903151 1.29462608          2       test</span></span>
<span><span class="co">## 3       3  9.651743 2.55067656          3       test</span></span>
<span><span class="co">## 4       4  9.254979 3.74998115          4       test</span></span>
<span><span class="co">## 5       5  8.708365 4.92558443          5       test</span></span>
<span><span class="co">## 6       6  8.012217 5.97988395          6       test</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="grouping">Grouping<a class="anchor" aria-label="anchor" href="#grouping"></a>
</h3>
<p>Up to now, we have only considered adding noise for a particular
dataset with only one type of movement. Imagine, however, that our
dataset contains the movement of more than one individual, such as in
the following case:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define the angles</span></span>
<span><span class="va">angles</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2</span> <span class="op">*</span> <span class="va">pi</span>, length.out <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create data for two participants, each walking in a circle but a few meters away from each other</span></span>
<span><span class="va">data_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  seconds <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">50</span>, </span>
<span>  X <span class="op">=</span> <span class="fl">10</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">cos</a></span><span class="op">(</span><span class="va">angles</span><span class="op">)</span>,</span>
<span>  Y <span class="op">=</span> <span class="fl">10</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">sin</a></span><span class="op">(</span><span class="va">angles</span><span class="op">)</span>,</span>
<span>  person <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span>
<span><span class="va">data_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  seconds <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">50</span>,</span>
<span>  X <span class="op">=</span> <span class="fl">5</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">cos</a></span><span class="op">(</span><span class="va">angles</span><span class="op">)</span> <span class="op">+</span> <span class="fl">5</span>,</span>
<span>  Y <span class="op">=</span> <span class="fl">5</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">sin</a></span><span class="op">(</span><span class="va">angles</span><span class="op">)</span> <span class="op">+</span> <span class="fl">5</span>,</span>
<span>  person <span class="op">=</span> <span class="fl">2</span></span>
<span><span class="op">)</span></span>
<span><span class="va">data</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">data_1</span>, <span class="va">data_2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot these data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">data</span><span class="op">$</span><span class="va">X</span>, </span>
<span>  <span class="va">data</span><span class="op">$</span><span class="va">Y</span>,</span>
<span>  col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">person</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="noiser_vignette_files/figure-html/unnamed-chunk-11-1.png" class="r-plt" alt="One sees 100 dots placed on the circumference of two circles. These two circles represent the two types of movement carried out by two separate people.
" width="75%"><p class="caption">
<em>Latent positions on a plane representing circular motion of two
different people.</em>
</p>
</div>
<p>If one wished to add noise to these type of data, one should consider
the person that generated those data in the first place. To ensure
<code>noiser</code> generates noise while accounting for the individual,
one should provide the relevant column to the <code>.by</code> argument,
so that:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Mention the additional columns explicitly in the mapping</span></span>
<span><span class="va">mapping</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"time"</span> <span class="op">=</span> <span class="st">"seconds"</span>,</span>
<span>  <span class="st">"x"</span> <span class="op">=</span> <span class="st">"X"</span>,</span>
<span>  <span class="st">"y"</span> <span class="op">=</span> <span class="st">"Y"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add noise to these data with the columns being provided</span></span>
<span><span class="va">noised_up</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/noiser.html">noiser</a></span><span class="op">(</span></span>
<span>  <span class="va">data</span>, </span>
<span>  cols <span class="op">=</span> <span class="va">mapping</span>,</span>
<span>  .by <span class="op">=</span> <span class="st">"person"</span>,</span>
<span>  model <span class="op">=</span> <span class="st">"independent"</span>,</span>
<span>  mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>  covariance <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/diag.html" class="external-link">diag</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">*</span> <span class="fl">0.5</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot the result</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">noised_up</span><span class="op">$</span><span class="va">X</span>, </span>
<span>  <span class="va">noised_up</span><span class="op">$</span><span class="va">Y</span>,</span>
<span>  col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">noised_up</span><span class="op">$</span><span class="va">person</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="noiser_vignette_files/figure-html/unnamed-chunk-12-1.png" class="r-plt" alt="One sees 100 dots placed on the circumference of two circles, albeit with some additional noise added per person. 
" width="75%"><p class="caption">
<em>Measured positions on a plane representing circular motion of two
different people after adding noised for each person separately.</em>
</p>
</div>
<p>Note that you donâ€™t have to specify the mapping of the
<code>person</code> column when it is specified through the
<code>.by</code> argument: This is automatically accounted for under the
hood.</p>
</div>
<div class="section level3">
<h3 id="specifying-your-own-measurement-model">Specifying your own measurement model<a class="anchor" aria-label="anchor" href="#specifying-your-own-measurement-model"></a>
</h3>
<p>It is possible to specify your own measurement model and provide it
to <code>noiser</code> to noise up the data. Imagine, for example, that
you would like to create your own independent measurement model, but one
that depends only on a user-provided triangular matrix
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Î“</mi><annotation encoding="application/x-tex">\Gamma</annotation></semantics></math>
rather than a covariance matrix
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Î£</mi><annotation encoding="application/x-tex">\Sigma</annotation></semantics></math>,
then one can do so by specifying:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create your own measurement model function</span></span>
<span><span class="va">my_model</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span></span>
<span>  <span class="va">data</span>, </span>
<span>  <span class="va">mean</span>, </span>
<span>  <span class="va">cholesky</span></span>
<span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Compute the covariance matrix</span></span>
<span>  <span class="va">sigma</span> <span class="op">&lt;-</span> <span class="va">cholesky</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span><span class="op">(</span><span class="va">cholesky</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># Use mvrnorm to generate residuals</span></span>
<span>  <span class="va">residuals</span> <span class="op">&lt;-</span> <span class="fu">MASS</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/MASS/man/mvrnorm.html" class="external-link">mvrnorm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span>, mu <span class="op">=</span> <span class="va">mean</span>, Sigma <span class="op">=</span> <span class="va">sigma</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># Add the residuals to the data</span></span>
<span>  <span class="va">data</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span><span class="op">)</span><span class="op">]</span> <span class="op">+</span> <span class="va">residuals</span></span>
<span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Use noiser to add noise to the data</span></span>
<span><span class="va">noised_up</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/noiser.html">noiser</a></span><span class="op">(</span></span>
<span>  <span class="va">data</span>, </span>
<span>  cols <span class="op">=</span> <span class="va">mapping</span>,</span>
<span>  .by <span class="op">=</span> <span class="st">"person"</span>,</span>
<span>  model <span class="op">=</span> <span class="va">my_model</span>,</span>
<span>  mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>  <span class="va">cholesky</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0.25</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span>nrow <span class="op">=</span> <span class="fl">2</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot these data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">noised_up</span><span class="op">$</span><span class="va">X</span>, </span>
<span>  <span class="va">noised_up</span><span class="op">$</span><span class="va">Y</span>,</span>
<span>  col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">noised_up</span><span class="op">$</span><span class="va">person</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="noiser_vignette_files/figure-html/unnamed-chunk-13-1.png" class="r-plt" alt="One sees the same data as before, but this time with different type of noise introduced. 
" width="75%"><p class="caption">
<em>Measured positions on a plane representing circular motion of two
different people after adding noised for each person separately through
our own measurement model.</em>
</p>
</div>
<p>Several things are of note here. First, <code>my_model</code> should
make use of <code>denoiser</code>â€™s internal column names rather than
the user-defined columns for the <code>data</code>. This means that the
time variable is stored under <code>time</code> and the x- and
y-coordinates are stored under <code>x</code> and <code>y</code>
respectively. Second, one should not worry about the <code>.by</code>
argument when specifying <code>my_model</code>: This is handled
automatically by <code>noiser</code>. Finally, one can specify their own
arguments in <code>my_model</code> and provide values to these arguments
in <code>noiser</code> itself. As can be seen in this chunk of code, the
arguments <code>mean</code> and <code>cholesky</code> of
<code>my_model</code> are provided to <code>noiser</code> rather than to
<code>my_model</code> itself: <code>noiser</code> will automatically
provide these arguments to <code>my_model</code> unless otherwise
specified.</p>
<p>Through this framework, users are able to specify their own
measurement models as they please, allowing them to surpass what is
provided in the package itself.</p>
</div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Hamilton, J. D. (1994). <em>Time series analysis</em>. Princeton
University Press. doi: 10.2307/j.ctv14jx6sm</p>
<p>Lord, F. M., Novick, M. R., &amp; Birnbaum, A. (1968).
<em>Statistical theories of mental test scores</em>. Addison-Wesley.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Niels Vanhasbroeck.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
